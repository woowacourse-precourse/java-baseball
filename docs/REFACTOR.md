# 11/28 숫자 야구 리팩토링

## ✏️ 기존 코드와 달라진 점
- 2주 차 미션 당시에는 클래스 분리, MVC 패턴, Enum, 캡슐화 등에 대한 개념 없이 기능 구현 및 테스트 통과에만 초점을 맞춘 코드였다.
- 리팩토링을 하며 4주 차까지 추가되었던 요구사항을 최대한 반영하였다.
- MVC패턴은 요구사항에는 없었으나 새롭게 공부하여 적용해 보았다.


## ✏️ 새롭게 배운 점
###  🔍 Enum(열거형)
- Enum : 서로 연관된 상수들의 집합
- Enum도 클래스다.
- 자동으로 값(0부터 시작)이 부여된다. - ordinal() 함수 
- Java의 열거형은 값과 타입 모두 체크한다.
- 열거 상수 각각을 자바 내부적으로 **public static final 필드**이면서 **객체**로 제공한다.
    - static필드이므로 메모리의 메소드 영역에 상주하며 프로그램 종료시까지 언제든지 가져다 쓸 수 있음
    - 참고: [Java 메모리 구조](https://coding-factory.tistory.com/830)
- **정의**
```
public enum Week { MON, TUE, WED, THU, FRI, SAT, SUN }
```
- **사용**
  - 어떤 클래스든 아래 로직을 만나면 힙 영역의 Week 객체는 MON부터 SUN까지 각각 java.lang.Enum 클래스를 상속 받는 고유의 객체가 만들어진다.
  - 메소드 영역의 열거 상수들은 해당 힙 영역에 생성된 객체를 바라본다.
  - 즉, 로직을 만나는 순간 이전에 메소드에 할당되었던 메모리에 힙 영역에 생긴 객체들이 할당된다.
  - **Enum의 상수 하나가 호출될 때마다 Enum 전체가 인스턴스화된다.**
```
Week today = Week.MON;
```
- 관례적으로 열거 타입 선언은 클래스 밖에서 하지만 특정 클래스에서만 필요할 때는 클래스 안에서 선언하기도 한다.
- 생성자, 필드, 메서드를 가질 수 있다.
- Enum에 멤버를 추가할 수 있다.
- 멤버를 추가하면 인스턴스 변수와 생성자(private)를 추가해야 한다.
- 모든 열거형의 조상은 java.lang.Enum클래스이다.
  - String name() : 열거형 상수의 이름을 문자열로 반환
  - int ordinal(): 열거형 상수가 정의된 순서 반환(0부터 시작)
  - T valueOf(Class<T> enumType, String name): 지정된 열거형에서 name과 일치하는 열거형 상수 반환
  - E values(): 열거형의 모든 상수를 배열에 담아 반환
  

- 참고: [Java Enum이란](https://honbabzone.com/java/java-enum/)

###  🔍 MVC 패턴
#### MVC란?
MVC(Model-View-Controller)는 어플리케이션을 세 가지 역할로 구분한 개발 방법론이다.
사용자가 입력을 담당하는 View를 통해 요청을 보내면 해당 요청을 Controller가 받고, Controller는 Model을 통해 데이터를 가져오고, 해당 데이터를 바탕으로 출력을 담당하는 View를 제어해서 사용자에게 전달한다. MVC 패턴을 사용하면 Model과 View가 다른 컴포넌트들에 종속되지 않아 변경에 유리하다는 장점을 가질 수 있다.
#### 모델(Model)
- 어플리케이션이 **무엇**을 할 것인지 정의한다.
- 내부 **비즈니스 로직**을 처리하기 위한 역할을 한다.
- 즉, 데이터 저장소(ex. DB)와 연동하여 사용자가 입력한 데이터나 사용자에게 출력할 데이터를 다룬다.
- 특히, 여러 개의 데이터 변경 작업(ex. 추가, 변경, 삭제)를 하나의 작업으로 묶은 트랜잭션을 다루는 일도 한다. 
- Model은 다른 컴포넌트들에 대해 알지 못한다. 자기 자신이 무엇을 수행하는지만 알고 있다.

#### 뷰(View)
- 최종 사용자에게 무엇을 **화면(UI)**로 보여준다.
- 화면에 무엇을 보여주기 위한 역할을 한다.
- 즉, 모델이 처리한 데이터나 그 작업 결과를 가지고 사용자에게 출력할 화면을 만든다.
- View 역시도 다른 컴포넌트들에 대해 알지 못한다. 자기 자신이 무엇을 수행하는지만 알고 있다.

#### 컨트롤러(Controller)
- Model과 View 사이에 있는 컴포넌트이다.
- Model이 데이터를 어떻게 처리할지 알려주는 역할을 한다.
- 클라이언트의 요청을 받으면 해당 요청에 대한 실제 업무를 수행하는 Model을 호출한다.
- 클라이언트가 보낸 데이터가 있다면, 모델을 호출할 때 전달하기 쉽게 적절히 가공한다.
- Model이 업무 수행을 완료하면 그 결과를 가지고 화면을 생성하도록 View에 전달한다.
- 즉, 클라이언트의 요청에 대해 Model과 View를 결정하여 전달하는 일종의 조정자로서의 일을 한다. 
- Controller는 다른 컴포넌트들에 대해 알고 있다. 자기 자신 외에 Model과 View가 무엇을 수행하는지 알고 있다.

#### MVC패턴 적용을 위한 규칙
실제 코드 작성시 아래 규칙에 따라 작성하면 MVC 패턴에 맞게 코드를 작성할 수 있다.
1. model은  controller와 view에 의존하지 않아야 한다.
   = model 내부에 controller와 view에 관련된 코드가 없어야 한다.

   (model 클래스에서 controller와 view의 클래스를 import하면 안 된다.)

2. view 내부에 model의 코드만 있을 수 있고, controller의 코드가 있으면 안된다.

3. view가 model로부터 데이터를 받을 때는, 사용자마다 다르게 보여주어야 하는 데이터에 대해서만 받아야 한다.
- 사용자에게 다르게 보여지는 부분 = model로부터 받은 데이터
- 사용자에게 같게 보여지는 부분 = view가 자체적으로 가지고 있는 내용

4. controller는 model과 view에 의존해도 된다.

   (controller 내부에는 model과 view의 코드가 있을 수 있다.)

5. view가 model로부터 데이터를 받을 때 반드시 controller에서 받아야 한다.


- 참고: https://pomo0703.tistory.com/7


## ✏️ 부족한 점
### 향후 공부할 부분
1. Layered Architecture, DTO (참고: [DTO의 사용 범위에 대하여](https://tecoble.techcourse.co.kr/post/2021-04-25-dto-layer-scope/))
2. 테스트 코드 (JUnit)
3. 스트림
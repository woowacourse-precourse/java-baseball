## ⚾ 숫자 야구 게임 (박정윤)

### < 기능 구현 목록 >

### 초기 설정

- [x] **컴퓨터** 랜덤 3자리 숫자
    - [x] `예외 처리`
        - [x] 각 자리 숫자가 1부터 9범위를 벗어나는 경우
        - [x] 각 자리 숫자에 중복이 있는 경우
        - [x] 입력 값의 길이가 3이 아닌 경우
        - [x] 숫자가 아닌 값이 들어온 경우
        - 사용자가 잘못된 값을 입력할 경우 IllegalArgumentException을 발생시킨 후 애플리케이션은 종료

### 메인 MVP
- [x] <입력> **게임 플레이어** 랜덤 3자리 숫자
    - `포맷` 숫자 야구 게임을 시작합니다.
    - `포맷` 숫자를 입력해주세요 : 123
    - [x] `예외 처리`
        - [x] 각 자리 숫자가 1부터 9범위를 벗어나는 경우
        - [x] 각 자리 숫자에 중복이 있는 경우
        - [x] 입력 값의 길이가 3이 아닌 경우
        - [x] 숫자가 아닌 값이 들어온 경우
        - 사용자가 잘못된 값을 입력할 경우 IllegalArgumentException을 발생시킨 후 애플리케이션은 종료
- [x] 게임 로직
    - [x] 스트라이크: 같은 수가 같은 자리 
    - [x] 볼: 같은 수가 다른 자리
    - [x] 낫싱: 같은 수가 전혀 없을 때
      - 낫싱은 스트라이크, 볼 모두 없을 때
- [x] 승패 판단
    - [x] 컴퓨터가 선택한 3개의 숫자를 모두 맞혔을 때 승리(3스트라이크)
- [x] 게임 종료 조건
  - [x] 승리했을 때 게임 종료
  - `포맷` 3개의 숫자를 모두 맞히셨습니다! 게임 종료
  - [x] <입력> 게임 재시작 : 1, 종료 : 2를 입력받는다.
    - `포맷` 게임을 새로 시작하려면 1, 종료하려면 2를 입력하세요.
    - [x] `예외 처리`
      - [x] 숫자가 1 또는 2가 아닌 경우
- [x] <출력>
  - 게임 로직으로 승패 판단을 하여 결과를 출력한다.
  - `포맷` 3스트라이크, 1볼 1스트라이크, 2볼

---

### < 폴더 구조 >

```
├─main
│  └─java
│      └─baseball
│          │  Application.java
│          │
│          ├─controller
│          │      BaseBallGameController.java
│          │
│          ├─domain
│          │      GameResult.java
│          │      GenerateNumbersImple.java
│          │      GenerateRandomNumbersImple.java
│          │      Numbers.java
│          │
│          ├─validator
│          │      CommandValidator.java
│          │      NumbersValidator.java
│          │
│          └─view
│                  InputView.java
│                  OutputView.java
│
└─test
    └─java
        ├─baseball
        │      ApplicationTest.java
        │      BaseBallGameTest.java
        │      InputTest.java
        │
        └─study
                StringTest.java
```

---

### <🧐 구현하면서 고민했던 점>
> 하나씩 구조를 고민하고 코딩한 경험은 오랜만에 머리가 지끈지끈했다. 변수, 메서드, 클래스 하나하나 다 고민하고 생각했다. <br>
> 어떻게 보면 미션에 던져진 나는 너무 막막하고 힘들지만 나는 이 힘든 과정이 나의 성장에 꼭 필요하다는 것을 알고 있다. <br>
> 아직도 자바를 잘 모르고 어렵다. 이번에 느낀 점은 자바가 어려운 게 아니라 자바를 자바답게 사용하는 게 어렵다는 것이다. 모르는게 많으면 더 열심히 공부하면 된다. 파이팅!

1️⃣ **처음부터 완벽하고 깔끔한 구조로 구현하려고 하지 말자.**

아직 자바 프로그래밍에 익숙하지 않고 이런 구조를 설계하는 것에 익숙하지 않은 상태에서 폴더구조와 클린 코드, 클린 아키텍처, 디자인 패턴은 나에게 무리라는 생각을 했다.

그래서 일단 한 클래스에 구현과 테스팅을 한 뒤 아키텍처를 생각하기로 했다.

그리고 구현이 완료되고 패키지를 생성하여 클래스를 묶어주기로 결정했다. 그런데 이 패키지를 묶는 기준은 어떻게 설정해야 할까? 비슷한 성격의 클래스. 좀 더 명확한 구조를 세우기 위해 디자인 패턴 중 'MVC 패턴'을 적용하기로 결정했다.

그 다음 클린코드를 생각하며 계속 리팩토링을 진행했다.

<br>

2️⃣ **Custom Exception을 생성할 지에 대한 고민**

Java에서 제공하는 RunTime Exception 중 현재 IllegalArgumentException을 사용한다.

이때 IllegalArgumentException만 사용할지 해당 exception을 상속받은 Custom Exception을 만들지 고민했다.

✔ `결론`: 주어진 예외를 잘 활용하자.

현재 validator는 유효하지 않은 입력(인자) 값에 대한 예외만 사용하고 있으므로 자바에서 정의해놓은 IllegalArgumentException을 사용하고 메시지만 예외사항에 맞게 재정의해준다면 충분히 그 의미를 파악할 수 있다고 생각했다.

그리고 메세지는 상수 처리하여 클래스 최 상단에 모아서 정의해두었다. 그렇게 하여 메서드만 많아지더라도 메세지를 빠르게 수정할 수 있도록 했다.

<br>

3️⃣ **정적 메서드(static)에 대한 나의 고민**

클래스를 구현하면서 static에 대해서 여러 글을 찾아보며 다시 생각해보았다.

현재 내 폴더 구조를 기준으로 View 부분은 static 하게, Domain 부분은 필요에 따라 인스턴스를 생성하도록 구현했다.
View 부분은 모든 사용자가 같은 input과 output을 보기 때문에 static으로 구현하는 게 속도가 빠르다고 판단했다.

<br>

4️⃣ **상수를 Constant로 분리할 지에 대한 고민**

상수들을 Constant로 따로 분리하지 않았다.

지금은 작은 서비스 구현이라서 내가 수정할 때 상수가 쓰이는 메서드 바로 위에서 확인하는 게 가독성이 높고 생산성이 높다고 판단했다.
좀 더 코드가 많아지고 복잡해지면 분리할 생각을 가지고 있다.
중간에 분리를 시도해보았지만 코드 수정을 확인하기가 어려웠다.

추후에 중복되게 필요한 상수가 생긴다면 상수들을 클래스에 모아두면 수정이 필요할 때 쉽게 찾을 수 있다.
그때엔 Constant Package를 만들어서 class를 만들 수 있다.

<br>

5️⃣ **캡슐화에 대한 고민**

Random한 3자리 숫자를 가져오는 방식.

- 처음
  - 처음에는 랜덤한 숫자를 반환하는 메서드를 호출해서 바로 사용했다. 하지만 Class를 분리하고 메서드를 분리하면서 RandomNumbers Class는 랜덤 숫자를 만들 때만 호출되었다.

- 리팩토링
  - 그래서 클래스 생성자를 통해서 변수를 초기화하는 방식으로 구현했다.
  이렇게 하면서 캡슐화를 할 수 있었다.
  RandomNumbers Class 내부에 있는 변수와 메서드는 private으로 선언하여 클래스 내부에서만 접근할 수 있다.